<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Japanese Kana Practice</title>
<style>
body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
#tabs { margin-bottom: 20px; }
.tab { display: inline-block; padding: 10px 20px; margin: 0 5px; border: 2px solid #0066ff; border-radius: 8px; cursor: pointer; }
.tab.active { background-color: #0066ff; color: white; }
#question { font-size: 40px; margin: 20px; }
#answer { font-size: 40px; margin: 20px; color: green; display: none; }
button { padding: 10px 20px; font-size: 18px; margin: 10px; }
#draw-area { border: 2px solid #000; margin: 20px auto; touch-action: none; }
</style>
</head>
<body>

<h2>Japanese Kana Practice</h2>

<div id="tabs">
    <div class="tab active" onclick="setMode('hiragana')">Practice Hiragana</div>
    <div class="tab" onclick="setMode('katakana')">Practice Katakana</div>
    <div class="tab" onclick="setMode('both')">Practice Both</div>
</div>

<div id="question">Press NEXT to start</div>
<div id="answer"></div>

<button onclick="showAnswer()">Show Answer</button>
<button onclick="nextQuestion()">Next</button>
<button onclick="clearCanvas()">Clear Drawing</button>

<h3>Draw your answer here:</h3>
<canvas id="draw-area" width="300" height="300"></canvas>

<script>
const hiraganaList = [
["a","あ"],["i","い"],["u","う"],["e","え"],["o","お"],
["ka","か"],["ki","き"],["ku","く"],["ke","け"],["ko","こ"]
];

const katakanaList = [
["a","ア"],["i","イ"],["u","ウ"],["e","エ"],["o","オ"],
["ka","カ"],["ki","キ"],["ku","ク"],["ke","ケ"],["ko","コ"]
];

let currentMode = 'hiragana';
let currentPool = hiraganaList.slice();
let current = null;

function setMode(mode){
    currentMode = mode;
    document.querySelectorAll('.tab').forEach(tab=>tab.classList.remove('active'));
    if(mode==='hiragana') document.querySelectorAll('.tab')[0].classList.add('active');
    if(mode==='katakana') document.querySelectorAll('.tab')[1].classList.add('active');
    if(mode==='both') document.querySelectorAll('.tab')[2].classList.add('active');

    if(mode==='hiragana') currentPool = hiraganaList.slice();
    else if(mode==='katakana') currentPool = katakanaList.slice();
    else currentPool = hiraganaList.concat(katakanaList);

    nextQuestion();
}

function nextQuestion() {
    current = currentPool[Math.floor(Math.random()*currentPool.length)];
    document.getElementById("question").innerText = current[0];
    document.getElementById("answer").style.display = "none";
    clearCanvas();
}

function showAnswer() {
    if(!current) return;

    if(currentMode === "both") {
        let h = hiraganaList.find(x => x[0] === current[0]);
        let k = katakanaList.find(x => x[0] === current[0]);
        document.getElementById("answer").innerText =
            (h ? h[1] : "") + " / " + (k ? k[1] : "");
    } else {
        document.getElementById("answer").innerText = current[1];
    }

    document.getElementById("answer").style.display = "block";
}

const canvas = document.getElementById("draw-area");
const ctx = canvas.getContext("2d");
let drawing = false;

function startDraw(e){drawing=true; ctx.beginPath(); ctx.moveTo(getX(e),getY(e));}
function draw(e){if(!drawing)return; ctx.lineWidth=6; ctx.lineCap="round"; ctx.lineTo(getX(e),getY(e)); ctx.stroke();}
function endDraw(){drawing=false;}
function getX(e){return (e.touches?e.touches[0].clientX:e.clientX)-canvas.offsetLeft;}
function getY(e){return (e.touches?e.touches[0].clientY:e.clientY)-canvas.offsetTop;}
canvas.addEventListener("mousedown",startDraw);
canvas.addEventListener("mousemove",draw);
canvas.addEventListener("mouseup",endDraw);
canvas.addEventListener("mouseout",endDraw);
canvas.addEventListener("touchstart",(e)=>{e.preventDefault(); startDraw(e);});
canvas.addEventListener("touchmove",(e)=>{e.preventDefault(); draw(e);});
canvas.addEventListener("touchend",endDraw);

function clearCanvas(){ctx.clearRect(0,0,canvas.width,canvas.height);}

setMode('hiragana');
</script>
</body>
</html>
